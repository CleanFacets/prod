
This directory contains interface files for the TI msp430 family of CPUs.
The TI architecture is rather scattered and the cpu interface to major
pieces reflects this.  The main problem areas include: peripheral registers,
interrupts, and interrupt vectors.

Care should be taken to minimize duplicates while maintaining the minimum implementation
that reflects the cpus currently supported by TinyOS.    This should be done in a way
that minimizes impact on existing implementations (be backward compatible).  See the
file 01_Dependencies for what CPUs are supported and the cpu dependencies.

Where reasonable, conflicting areas are kept in a flat file and differences are
#ifdef'd.   When this becomes too cumbersome, different interface definitions and
implementations are placed into cpu family directories and the interface to
the rest of tinyos is shadowed.   The correct directory needs to be specified in
the .platform file.

Most of the cpu definitions are obtained automatically via the toolchain, ie. the -mmcu
specification automatically included the appropriate cpu header file.  ie. -mmcu=msp430x2618
causes the msp430f2618.h include file to be invoked.

The TI MSP430 family has many variants.  There is a main cpu core and various integrated peripherals on
chip.  What a given chip includes is spelled out by the included chip definition file automatically
included via the -mmcu mechanism.

The tinyos interface is spit into several sections:

msp430hardware.h and msp430regtypes.h define various other attributes that interface the cpu
to the tinyos environment.   These files coupled with the chip definition file define the cpu
and other capabilities available.

The original architecture, the MSP430, provides 16 bit addresses.   A subsequent revision denoted
MSP430X modifies the cpu and addressing to provide 20 bit addresses.  Backward compatibilty to the
MSP430 was considered.   A further modification is denoted the MSP430XV2 but it is unclear exactly
what this modified.

Several directories are available that provide the drivers for the specified peripheral.  Presence
of the peripheral can be detected by checking appropriate values in the chip definition file.  These 
directories are:

adc12:	Most MSP430 chips include a 12 bit analog to digital converter.

dma:	3 or 8 independent dma channels are provided. MSP430X cpus can address 20 bits via the DMA
	engines.   20 bits increases the overhead significantly and should only be used if really
	needed.  ie.  Most cpus only provide RAM in the lower 64K so there really isn't much need
	for 20 bit addresses, unless one is DMAing out of high memory (ROM).

	Currently, only a 16 bit dma interface is provided.  In the future a dma32 interface could
	be defined to provide access to the full 20 bits of addressing.

pins:	interface to digital I/O.

sensors: interfaces to on chip internal temperature and voltage sensors.

timer:	interface to on chip timing mechanisms.  Timers and Alarms.

usart:	interface to original UART/SPI/I2C on MSP430 parts.  (1st generation).

usci:	interface to USCI modules UART/SPI/I2C on MSP430X and later parts.



CPU Families:

When it is too cumbersome to maintain a flat file that includes #ifdef'd difference for each of 
the different variants, it is useful to seperate common interfaces into cpu family dependent family
files that provide various TinyOS interfaces.

The following families and what cpus are supported are listed below.  When a new cpu is added to TinyOS
support, it can first be isolated and supported independently.   When commonalities are understood, any
duplication can be removed and subsumed into a flat file via #ifdef's as appropriate.   Any remaining
interfaces that are too cumbersome, can be supported by an existing cpu family interface or a new family
can be defined as appropriate.  The intent is to provide a mechanism that allows gradual refactorization as
new cpus are brought into the fold.

The following families currently exist.   Included are what cpus have been verified.  Only add cpus that
have actually been instantiated.

x1xxx: msp430f1611, msp430f149
       telos{a,b}, epic, eyesIFXv1, eyesIFXv2, shimmer{,2,2r}, span, tinynode

x2xxx: msp430f2617, msp430f2618, msp430f2619
       Z1, MM4 (mam-mark mote)

x5xxx: cc430f5137, msp430f5438{,a}
       surf, ev430, mm5 (mam-mark mote)

